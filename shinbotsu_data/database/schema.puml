@startuml
entity "user" as u {
    *user_id: number <<generated>>
    *email: string
    --
    *username: string
    *password: string
    date_joined: date
    last_login: date
    is_staff: boolean
    anki_key: string
    bunpro_api_key: string
    wanikuni_api_key: string
}

entity "media" as m {
    *id: number<<generated>>
    *media_id: number
    --
    *title: string
    title_en: string
    studio/author: string
    publisher: string
    release_date: date
    synopsis: text
    media_type: string['anime', 'live action', 'novel', 'manga', 'video game']
}

entity "anime_detail" as ad {
    *media_id:reference<<media:id>>
    --
    season:number
    nb_episode:number
    
}

entity "person" as p {
    id: number<<generated>>
    source_id:string
    name:string
}

entity "producer" as pr {
    id:number
    source_id:number
    name:string
}

entity "media_person" as mp {
    id_media:number
    id_person:number
}

entity "media_producer" as mp {
    id_media:number
    id_producer:number
    role:string['studio', 'producer', 'publisher', 'licensors']
}


entity "media_tag" as mt {
    *id_media: number
    *id_tag: number
    category: string["genres", "themes", "demographics"]
}

entity "tag" as t {
    *id:number<<generated>>
    label:string
}

entity "reviews" as r {
    *review_id: number<<generated>>
    --
    rating: number
    difficulty: number
    impression: text
    is_spoiler: boolean
}

entity "user_media" as um {
    *user_id: number
    *media_id: number
    --
    status: string['Dropped', 'Plan to engage', 'On hold', 'In progress', 'Completed']
}

entity "user_list" as ul {
    *list_id: number<<generated>>
    *user_id: number<<FK>>
    --
    list_name: string
    created_at: timestamp
}

entity "user_list_item" as uli {
    *item_id: number<<generated>>
    *list_id: number<<FK>>
    *media_id: number<<FK>>
    --
    added_at: timestamp
}

m}o--||mt


@enduml